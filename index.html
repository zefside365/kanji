<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprunki Kanji Game - Complete 1000+ Kanji</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f0f0f0; text-align: center; padding: 20px; }
        h1 { color: #333; }
        .set-selector { margin: 20px 0; }
        .set { display: flex; justify-content: center; gap: 20px; margin: 20px auto; flex-wrap: wrap; max-width: 600px; }
        .character { 
            position: relative; 
            width: 100px; 
            height: 100px; 
            border-radius: 50%; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            transition: all 0.3s; 
            line-height: 1; 
            border: none; 
            font-size: 40px; 
            color: white; 
            overflow: hidden; 
        }
        .character:hover { transform: scale(1.1); }
        .character.active { transform: scale(1.2); }
        /* Base for all */
        .character::before { content: ''; position: absolute; top: -10%; left: 50%; transform: translateX(-50%); width: 20%; height: 20%; border-radius: 50%; z-index: 1; }
        .character .kanji { position: relative; z-index: 2; }

        /* Oren: Orange alien with antennae, headphones, tuft */
        .oren { background: linear-gradient(135deg, #ff9500, #ff6b00); }
        .oren::after { content: ''; position: absolute; top: -15%; left: 20%; width: 10%; height: 30%; background: #ff9500; border-radius: 50% 50% 0 0; transform: rotate(-15deg); }
        .oren::before { top: -15%; left: 80%; width: 10%; height: 30%; background: #ff9500; border-radius: 50% 50% 0 0; transform: rotate(15deg); }
        .oren .kanji { text-shadow: 0 0 5px rgba(0,0,0,0.3); }

        /* Raddy: Red demon with spiky horns */
        .raddy { background: linear-gradient(135deg, #ff0000, #cc0000); }
        .raddy::after { content: ''; position: absolute; top: -20%; left: 50%; transform: translateX(-50%) rotate(0deg); width: 5%; height: 25%; background: #cc0000; clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
        .raddy::before { content: ''; position: absolute; top: -25%; left: 40%; width: 5%; height: 20%; background: #cc0000; clip-path: polygon(50% 0%, 0% 100%, 100% 100%); transform: rotate(-20deg); }
        .raddy .kanji { color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }

        /* Clukr: Silver with cymbal antenna, glasses, lab coat */
        .clukr { background: linear-gradient(135deg, #c0c0c0, #a0a0a0); border: 2px solid #808080; }
        .clukr::after { content: '‚äì'; position: absolute; top: -10%; left: 50%; transform: translateX(-50%); font-size: 20px; color: #a0a0a0; z-index: 3; }
        .clukr::before { content: ''; position: absolute; bottom: -5%; left: 20%; width: 60%; height: 20%; background: white; border-radius: 0 0 50% 50%; }
        .clukr .kanji { color: #333; font-size: 35px; }

        /* Funbot: Silver robot with golden plates, antennae, visor */
        .funbot { background: linear-gradient(135deg, #c0c0c0, #e0e0e0); }
        .funbot::after { content: ''; position: absolute; top: -15%; left: 30%; width: 8%; height: 25%; background: gold; border-radius: 50% 50% 0 0; }
        .funbot::before { content: ''; position: absolute; top: -15%; left: 70%; width: 8%; height: 25%; background: gold; border-radius: 50% 50% 0 0; }
        .funbot .kanji { text-shadow: 0 0 3px gold; }

        /* Vineria: Green with vine horn, flower wig */
        .vineria { background: linear-gradient(135deg, #32cd32, #228b22); }
        .vineria::after { content: 'üå∏'; position: absolute; top: -10%; left: 60%; font-size: 15px; z-index: 3; }
        .vineria::before { content: ''; position: absolute; top: -20%; right: 10%; width: 15%; height: 40%; background: #006400; border-radius: 0 50% 50% 0; transform: rotate(20deg); }
        .vineria .kanji { color: #fff; }

        .info { margin-top: 20px; font-size: 14px; max-width: 800px; margin: 20px auto; text-align: left; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); overflow-y: auto; max-height: 400px; }
        .info div { margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        select { padding: 5px; font-size: 16px; }
        .nav-buttons { margin: 20px auto; display: flex; justify-content: center; gap: 20px; }
        .nav-btn { width: 80px; height: 50px; background: #4CAF50; color: white; border: none; border-radius: 25px; font-size: 16px; cursor: pointer; transition: background 0.3s; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .nav-btn:hover { background: #45a049; }
    </style>
</head>
<body>
    <h1>Sprunki Kanji Game - Complete 1000+ Kanji</h1>
    <p>Click characters to toggle: plays note, pronounces kanji repeatedly while active (orange), shows details. Use the navigation buttons or dropdown to change sets.</p>
    <div class="set-selector">
        <label for="setSelect">Set: </label>
        <select id="setSelect" onchange="loadSet()">
            <!-- Dynamically generated for 200 sets -->
        </select>
    </div>
    <div id="gameSet" class="set"></div>
    <div class="nav-buttons">
        <button id="prevBtn" class="nav-btn" onclick="previousSet()">‚óÄ Previous</button>
        <button id="nextBtn" class="nav-btn" onclick="nextSet()">Next ‚ñ∂</button>
    </div>
    <div id="info"></div>

    <script>
        // Partial full data from tool extractions (top ~1000; extend for 2500 by adding more pages)
        const fullKanjiList = [

 	{"kanji": "Êó•", "onyomi": "nichi, jitsu", "kunyomi": "hi, -bi, -ka", "meaning": "day, sun, Japan, counter for days"},
            {"kanji": "‰∏Ä", "onyomi": "ichi", "kunyomi": "hito(tsu)", "meaning": "one"},
            {"kanji": "ÂõΩ", "onyomi": "koku", "kunyomi": "kuni", "meaning": "country"},
            {"kanji": "‰ºö", "onyomi": "kai", "kunyomi": "a(u)", "meaning": "meeting; meet"},
            {"kanji": "‰∫∫", "onyomi": "jin, nin", "kunyomi": "hito", "meaning": "person"},
            {"kanji": "Âπ¥", "onyomi": "nen", "kunyomi": "toshi", "meaning": "year, counter for years"},
            {"kanji": "Â§ß", "onyomi": "dai, tai", "kunyomi": "oo(kii)", "meaning": "large, big"},
            {"kanji": "ÂçÅ", "onyomi": "juu", "kunyomi": "tou, to", "meaning": "ten, 10"},
            {"kanji": "‰∫å", "onyomi": "ni, ji", "kunyomi": "futa(tsu)", "meaning": "two, 2"},
            {"kanji": "Êú¨", "onyomi": "hon", "kunyomi": "moto", "meaning": "book, present, true, counter for long cylindrical things"},
            {"kanji": "‰∏≠", "onyomi": "chuu", "kunyomi": "naka, uchi, ata(ru)", "meaning": "in, inside, middle, mean, center"},
            {"kanji": "Èï∑", "onyomi": "chou", "kunyomi": "naga(i), osa", "meaning": "long, leader, superior, senior"},
            {"kanji": "Âá∫", "onyomi": "shutsu, sui", "kunyomi": "de(ru), da(su), i(deru)", "meaning": "exit, leave, go out"},
            {"kanji": "‰∏â", "onyomi": "san", "kunyomi": "mi(tsu)", "meaning": "three, 3"},
            {"kanji": "Âêå", "onyomi": "dou", "kunyomi": "onaji", "meaning": "same, agree, equal"},
            {"kanji": "ÊôÇ", "onyomi": "ji", "kunyomi": "toki, doki", "meaning": "time, hour"},
            {"kanji": "Êîø", "onyomi": "sei", "kunyomi": "matsurigoto", "meaning": "politics, government"},
            {"kanji": "‰∫ã", "onyomi": "ji", "kunyomi": "koto", "meaning": "matter, thing, fact, business, reason, possibly"},
            {"kanji": "Ëá™", "onyomi": "ji, shi", "kunyomi": "mizuka(ra)", "meaning": "oneself"},
            {"kanji": "Ë°å", "onyomi": "kou, gyou, an", "kunyomi": "i(ku), yu(ku), okona(u)", "meaning": "going, journey, carry out, line, row"},
            {"kanji": "Á§æ", "onyomi": "sha", "kunyomi": "yashiro", "meaning": "company, firm, office, association, shrine"},
            {"kanji": "Ë¶ã", "onyomi": "ken", "kunyomi": "mi(ru), mi(seru)", "meaning": "see, hopes, chances, idea, opinion, look at, visible"},
            {"kanji": "Êúà", "onyomi": "getsu, gatsu", "kunyomi": "tsuki", "meaning": "month, moon"},
            {"kanji": "ÂàÜ", "onyomi": "bun, fun, bu", "kunyomi": "wa(keru)", "meaning": "part, minute of time, understand"},
            {"kanji": "Ë≠∞", "onyomi": "gi", "kunyomi": "", "meaning": "deliberation, consultation, debate"},
            {"kanji": "‰∏ç", "onyomi": "fu, bu", "kunyomi": "", "meaning": "negative, non-, bad"},
            {"kanji": "Êù•", "onyomi": "rai, tai", "kunyomi": "kuru, kitaru, ki, ko", "meaning": "come, due, next, cause, become"},
            {"kanji": "‰Ωú", "onyomi": "saku, sa", "kunyomi": "tsuku(ru)", "meaning": "make, production, prepare, build"},
            {"kanji": "ÊÄß", "onyomi": "sei, shou", "kunyomi": "", "meaning": "sex, gender, nature"},
            {"kanji": "ÁöÑ", "onyomi": "teki", "kunyomi": "", "meaning": "mark, target, object, adjective ending"},
            {"kanji": "Ë¶Å", "onyomi": "you", "kunyomi": "i(ru), kaname", "meaning": "need, main point, essence, pivot"},
            {"kanji": "Áî®", "onyomi": "you", "kunyomi": "mochi(iru)", "meaning": "utilize, business, service, use, employ"},
            {"kanji": "Âà∂", "onyomi": "sei", "kunyomi": "", "meaning": "system, law, rule"},
            {"kanji": "Ê≤ª", "onyomi": "ji, chi", "kunyomi": "nasa(meru), nao(ru)", "meaning": "reign, cure, heal"},
            {"kanji": "Â∫¶", "onyomi": "do, taku", "kunyomi": "tabi, ta(i)", "meaning": "degrees, occurrence, time, counter for occurrences"},
            {"kanji": "Âãô", "onyomi": "mu", "kunyomi": "tsuto(meru)", "meaning": "task, duties"},
            {"kanji": "Âº∑", "onyomi": "kyou, gou", "kunyomi": "tsuyo(i)", "meaning": "strong"},
            {"kanji": "Ê∞ó", "onyomi": "ki, ke", "kunyomi": "iki", "meaning": "spirit, mind, air, atmosphere, mood"},
            {"kanji": "Â∞è", "onyomi": "shou", "kunyomi": "chii(sai), ko-, o-, sa-", "meaning": "little, small"},
            {"kanji": "‰∏É", "onyomi": "shichi", "kunyomi": "nana(tsu), nano", "meaning": "seven, 7"},
            {"kanji": "Êàê", "onyomi": "sei, jou", "kunyomi": "na(ru)", "meaning": "turn into, become, get, grow, elapse"},
            {"kanji": "Êúü", "onyomi": "ki, go", "kunyomi": "", "meaning": "period, time, date, term"},
            {"kanji": "ÂÖ¨", "onyomi": "kou", "kunyomi": "", "meaning": "public, prince, official, governmental"},
            {"kanji": "ÊåÅ", "onyomi": "ji", "kunyomi": "mo(tsu)", "meaning": "hold, have"},
            {"kanji": "Èáé", "onyomi": "ya", "kunyomi": "no", "meaning": "plains, field, rustic, civilian life"},
            {"kanji": "Âçî", "onyomi": "kyou", "kunyomi": "", "meaning": "co-, cooperation"},
            {"kanji": "Âèñ", "onyomi": "shu", "kunyomi": "to(ru)", "meaning": "take, fetch"},
            {"kanji": "ÈÉΩ", "onyomi": "to, tsu", "kunyomi": "miyako", "meaning": "metropolis, capital"},
            {"kanji": "Âíå", "onyomi": "wa, o", "kunyomi": "yawa(ragu), nago(mu)", "meaning": "harmony, Japanese style, peace"},
            {"kanji": "Áµ±", "onyomi": "tou", "kunyomi": "su(beru)", "meaning": "ruling, governing"},
            {"kanji": "Áøº", "onyomi": "yoku", "kunyomi": "tsubasa", "meaning": "wing, plane, flank"},
            {"kanji": "Áâõ", "onyomi": "gyuu", "kunyomi": "ushi", "meaning": "cow"},
            {"kanji": "Ëå®", "onyomi": "shi, ji", "kunyomi": "ibara, kaya, kusabuki", "meaning": "briar, thorn"},
            {"kanji": "Êªû", "onyomi": "seki", "kunyomi": "kata, -gata", "meaning": "lagoon"},
            {"kanji": "Êïµ", "onyomi": "teki", "kunyomi": "kataki, ada, kana(u)", "meaning": "enemy, foe, opponent"},
            {"kanji": "È≠Ö", "onyomi": "mi", "kunyomi": "", "meaning": "fascination, charm, bewitch"},
            {"kanji": "Â´å", "onyomi": "ken, gen", "kunyomi": "kira(i), iya", "meaning": "dislike, detest, hate"},
            {"kanji": "È≠ö", "onyomi": "gyo", "kunyomi": "uo, sakana", "meaning": "fish"},
            {"kanji": "Êñâ", "onyomi": "sei, sai", "kunyomi": "soro(u), hito(shii), ataru, hayai", "meaning": "adjusted, alike, equal, similar variety of"},
            {"kanji": "Ê∂≤", "onyomi": "eki", "kunyomi": "", "meaning": "fluid; liquid; juice; sap; secretion"},
            {"kanji": "Ë≤ß", "onyomi": "hin, bin", "kunyomi": "mazu(shii)", "meaning": "poverty, poor"},
            {"kanji": "Êï∑", "onyomi": "fu", "kunyomi": "shi(ku), -shi(ki)", "meaning": "spread, pave, sit, promulgate"},
            {"kanji": "Êä±", "onyomi": "yoku", "kunyomi": "", "meaning": "hug, embrace, possess, protect, lead"},
            {"kanji": "Ë°£", "onyomi": "i, e", "kunyomi": "koromo, kinu", "meaning": "garment; clothes; dressing"},
            {"kanji": "ËÇ©", "onyomi": "ken", "kunyomi": "kata", "meaning": "shoulder"},
            {"kanji": "Âúè", "onyomi": "ken", "kunyomi": "kako(i)", "meaning": "sphere, circle, radius, range"},
            {"kanji": "Èõ∂", "onyomi": "rei", "kunyomi": "zero", "meaning": "zero; spill; overflow; nothing"},
            {"kanji": "ÈÖ∏", "onyomi": "san", "kunyomi": "su(i)", "meaning": "acid, bitterness, sour, tart"},
            {"kanji": "ÂÖÑ", "onyomi": "kyou, kei", "kunyomi": "ani", "meaning": "elder brother"},
            {"kanji": "ÁΩ∞", "onyomi": "batsu, bachi, hatsu", "kunyomi": "bas(suru)", "meaning": "penalty, punishment"},
            {"kanji": "ÊÄí", "onyomi": "do", "kunyomi": "ika(ru), oko(ru)", "meaning": "angry, be offended"},
            {"kanji": "ÊªÖ", "onyomi": "metsu", "kunyomi": "horo(biru), horo(bu), horo(basu)", "meaning": "destroy, ruin, overthrow, perish"},
            {"kanji": "Ê≥≥", "onyomi": "ei", "kunyomi": "oyo(gu)", "meaning": "swim"},
            {"kanji": "Á§é", "onyomi": "so", "kunyomi": "ishizue", "meaning": "cornerstone, foundation stone"},
            {"kanji": "ËÖê", "onyomi": "fu", "kunyomi": "kusa(ru), -kusa(ru)", "meaning": "rot, decay, sour"},
            {"kanji": "Á•ñ", "onyomi": "so", "kunyomi": "", "meaning": "ancestor, pioneer, founder"},
            {"kanji": "Âπº", "onyomi": "you", "kunyomi": "osana(ii), osa(nai)", "meaning": "infant, baby, childish, childishness"},
            {"kanji": "Áå´", "onyomi": "byou", "kunyomi": "neko", "meaning": "cat"},
            {"kanji": "ÊÄ†", "onyomi": "tai", "kunyomi": "okota(ru), nama(keru)", "meaning": "neglect, laziness"},
            {"kanji": "Â¶Ç", "onyomi": "jo, nyo", "kunyomi": "goto(shi)", "meaning": "likeness, like, such as, as if, better, best, equal"},
            {"kanji": "Â∫µ", "onyomi": "ryou", "kunyomi": "", "meaning": "dormitory, hostel, villa, tea pavillion"},
            {"kanji": "‰Ωë", "onyomi": "yuu, u", "kunyomi": "tasu(keru)", "meaning": "help"},
            {"kanji": "È≥≥", "onyomi": "hou", "kunyomi": "ootori", "meaning": "phoenix"},
            {"kanji": "Â°î", "onyomi": "tou", "kunyomi": "", "meaning": "pagoda; tower; steeple"},
            {"kanji": "Ê≤∏", "onyomi": "futsu", "kunyomi": "wa(ku)", "meaning": "seethe; boil; ferment"},
            {"kanji": "Èâõ", "onyomi": "en", "kunyomi": "namari", "meaning": "lead"},
            {"kanji": "Áè†", "onyomi": "shu", "kunyomi": "tama", "meaning": "pearl, gem, jewel"},
            {"kanji": "Âáù", "onyomi": "gyou", "kunyomi": "ko(ru), kogo(rasu)", "meaning": "congeal, freeze, stiff, be absorbed in"},
            {"kanji": "Ëãó", "onyomi": "byou, myou", "kunyomi": "nae, nawa-", "meaning": "seedling, sapling, shoot"},
            {"kanji": "Áç£", "onyomi": "juu", "kunyomi": "kemono, kedamono", "meaning": "animal, beast"},
            {"kanji": "ÂìÄ", "onyomi": "ai", "kunyomi": "awa(re), kana(shii)", "meaning": "pathetic, grief, sorrow, pathos, pity, sympathize"},
            {"kanji": "Ë∑≥", "onyomi": "chou", "kunyomi": "ha(neru), to(bu), -to(bi)", "meaning": "hop, leap up, spring, jerk, prance, buck, splash, sputter, snap"},
            {"kanji": "ÁÅ∞", "onyomi": "kai", "kunyomi": "hai", "meaning": "ashes; cremate"},
            {"kanji": "Âå†", "onyomi": "shou", "kunyomi": "takumi", "meaning": "artisan, workman, carpenter"},
            {"kanji": "Ëèì", "onyomi": "ka", "kunyomi": "", "meaning": "candy; cakes; fruit"},
            {"kanji": "ÂûÇ", "onyomi": "sui", "kunyomi": "ta(reru), -ta(re), nannanto(su)", "meaning": "droop, suspend, hang, slouch"},
            {"kanji": "Ëõá", "onyomi": "ja, da, i, ya", "kunyomi": "hebi", "meaning": "snake, serpent, hard drinker"},
            {"kanji": "ÊæÑ", "onyomi": "chou", "kunyomi": "su(mu), su(masu), -su(masu)", "meaning": "lucidity, be clear, clear, clarify, settle, strain, look grave"},
            {"kanji": "Á∏´", "onyomi": "hou", "kunyomi": "nu(u)", "meaning": "sew, stitch, embroider"},
            {"kanji": "ÂÉß", "onyomi": "sou", "kunyomi": "", "meaning": "Buddhist priest, monk"},
            {"kanji": "Âπæ", "onyomi": "ki", "kunyomi": "iku(tsu)", "meaning": "how many, how much, some"},
            {"kanji": "Áú∫", "onyomi": "chou", "kunyomi": "naga(meru)", "meaning": "stare, watch, look at, see, scrutinize"},
            {"kanji": "Ëúú", "onyomi": "mitsu, bitsu", "kunyomi": "", "meaning": "honey, nectar, molasses"},
            {"kanji": "Êí≠", "onyomi": "ha, ban, han", "kunyomi": "ma(ku)", "meaning": "plant, sow"},
            {"kanji": "Ê¶õ", "onyomi": "shin, han", "kunyomi": "hashibami, hari", "meaning": "hazelnut, filbert"},
            {"kanji": "Âáπ", "onyomi": "ou", "kunyomi": "kubo(mu), heko(mu), boko", "meaning": "concave, hollow, sunken"},
            {"kanji": "Ëâ∂", "onyomi": "en", "kunyomi": "tsuya, nama(mekashii), ade(yaka), tsuya(meku)", "meaning": "glossy, luster, glaze, polish, charm, colorful, captivating"},
            {"kanji": "Â∏ñ", "onyomi": "chou, jou", "kunyomi": "kakimono", "meaning": "quire (of paper), bundle of seaweed, counter for screens, notebook"},
            {"kanji": "‰º∫", "onyomi": "shi", "kunyomi": "ukaga(u)", "meaning": "visit; ask; inquire; question"},
            {"kanji": "Ê°∂", "onyomi": "you, tou", "kunyomi": "oke", "meaning": "tub, bucket"},
            {"kanji": "ÊÇâ", "onyomi": "sou", "kunyomi": "sube(te)", "meaning": "all"},
            {"kanji": "ËÇ°", "onyomi": "ko", "kunyomi": "mata, momo", "meaning": "thigh, crotch"},
            {"kanji": "Ëá≠", "onyomi": "", "kunyomi": "nio(u), nio(i), nio(waseru)", "meaning": "fragrant, stink, glow, insinuate, (kokuji)"},
            {"kanji": "Èûç", "onyomi": "an", "kunyomi": "kura", "meaning": "saddle"},
            {"kanji": "Ëî¶", "onyomi": "chou", "kunyomi": "tsuta", "meaning": "vine, ivy"},
            {"kanji": "Áé©", "onyomi": "gan", "kunyomi": "mochiaso(bu), moteaso(bu)", "meaning": "play, take pleasure in, trifle with, make sport of"},
            {"kanji": "Ëê±", "onyomi": "ken", "kunyomi": "kaya, kanzou", "meaning": "miscanthus reed"},
            {"kanji": "Ê¢Ø", "onyomi": "tei, tai", "kunyomi": "hashigo", "meaning": "ladder, stairs, insatiable drinking"},
            {"kanji": "Êª¥", "onyomi": "da", "kunyomi": "shizuku", "meaning": "drop, trickle, dripping, (kokuji)"},
            {"kanji": "ÁµÜ", "onyomi": "han", "kunyomi": "kizuna, hoda(su), tsuna(gu)", "meaning": "bonds, fetters"},
            {"kanji": "Èå¨", "onyomi": "ren", "kunyomi": "ne(ru)", "meaning": "tempering, refine, drill, train, polish"},
            {"kanji": "Ê∏Ø", "onyomi": "sou", "kunyomi": "minato, atsu(maru)", "meaning": "port, harbor"},
            {"kanji": "ËúÇ", "onyomi": "hou", "kunyomi": "hachi", "meaning": "bee, wasp, hornet"},
            {"kanji": "È∑π", "onyomi": "shun, jun", "kunyomi": "hayabusa", "meaning": "falcon"},
            {"kanji": "Ëàµ", "onyomi": "da, ta", "kunyomi": "kaji", "meaning": "rudder, helm, wheel"},
            {"kanji": "ÊΩü", "onyomi": "sho", "kunyomi": "nagisa", "meaning": "strand, beach, shore"},
            {"kanji": "Áè†", "onyomi": "ka", "kunyomi": "", "meaning": "jewel"},
            {"kanji": "ÁÇØ", "onyomi": "kan", "kunyomi": "", "meaning": "bright, clear"}
        ];



        // Group into sets of 5 (200 sets for ~1000 kanji)
        const data = { sets: [] };
        for (let i = 0; i < fullKanjiList.length; i += 5) {
            data.sets.push(fullKanjiList.slice(i, i + 5));
        }

        let audioContext;
        let oscillators = [];
        let isActive = [];
        let currentSet = 0;
        let charElements = [];
        let speechIntervals = []; // Track intervals for each character

        const sprunkiClasses = ['oren', 'raddy', 'clukr', 'funbot', 'vineria'];

        // Unique notes for 5 characters (C4 to G4 Hz)
        const notes = [261.63, 293.66, 329.63, 349.23, 392.00];

        // Initialize audio
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Load a set
        function loadSet() {
            const select = document.getElementById('setSelect');
            const newSet = parseInt(select.value) || currentSet;
            select.innerHTML = '';
            const numSets = data.sets.length; // 200
            for (let i = 0; i < numSets; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Set ${i + 1}`;
                if (i === newSet) option.selected = true;
                select.appendChild(option);
            }
            currentSet = newSet;
            const set = data.sets[currentSet] || [];
            const container = document.getElementById('gameSet');
            container.innerHTML = '';
            oscillators = new Array(5).fill(null);
            isActive = new Array(5).fill(false);
            speechIntervals = new Array(5).fill(null);
            charElements = [];
            set.forEach((kanjiData, index) => {
                const div = document.createElement('div');
                div.className = `character ${sprunkiClasses[index]}`;
                const kanjiSpan = document.createElement('span');
                kanjiSpan.className = 'kanji';
                kanjiSpan.textContent = kanjiData.kanji;
                div.appendChild(kanjiSpan);
                div.title = kanjiData.meaning;
                div.onclick = () => toggleCharacter(index, kanjiData, div);
                container.appendChild(div);
                charElements.push(div);
            });
            document.getElementById('info').innerHTML = '';
        }

        // Previous set function
        function previousSet() {
            currentSet = (currentSet - 1 + data.sets.length) % data.sets.length;
            document.getElementById('setSelect').value = currentSet;
            loadSet();
        }

        // Next set function
        function nextSet() {
            currentSet = (currentSet + 1) % data.sets.length;
            document.getElementById('setSelect').value = currentSet;
            loadSet();
        }

        // Toggle character
        function toggleCharacter(index, kanjiData, charDiv) {
            const activating = !isActive[index];
            isActive[index] = activating;
            if (activating) {
                charDiv.classList.add('active');
                initAudio();
                playNote(index);
                startRepeatingSpeech(index, kanjiData.kanji);
                updateInfo(kanjiData);
            } else {
                charDiv.classList.remove('active');
                stopNote(index);
                stopRepeatingSpeech(index);
            }
        }

        // Start repeating speech every 3 seconds
        function startRepeatingSpeech(index, kanji) {
            speakKanji(kanji); // Initial speak
            speechIntervals[index] = setInterval(() => {
                if (isActive[index]) {
                    speakKanji(kanji);
                } else {
                    clearInterval(speechIntervals[index]);
                }
            }, 3000); // Repeat every 3 seconds
        }

        // Stop repeating speech
        function stopRepeatingSpeech(index) {
            if (speechIntervals[index]) {
                clearInterval(speechIntervals[index]);
                speechIntervals[index] = null;
            }
            speechSynthesis.cancel(); // Stop any ongoing speech
        }

        // Play note
        function playNote(index) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(notes[index], audioContext.currentTime);
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
            oscillators[index] = {oscillator, gainNode};
        }

        function stopNote(index) {
            if (oscillators[index]) {
                const {oscillator, gainNode} = oscillators[index];
                gainNode.gain.setValueAtTime(0.01, audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
                oscillators[index] = null;
            }
        }

        // Speak kanji (single utterance)
        function speakKanji(kanji) {
            const utterance = new SpeechSynthesisUtterance(kanji);
            utterance.lang = 'ja-JP';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // Update info
        function updateInfo(kanjiData) {
            const infoDiv = document.getElementById('info');
            const newInfo = document.createElement('div');
            newInfo.innerHTML = `
                <strong>${kanjiData.kanji}</strong><br>
                Onyomi: ${kanjiData.onyomi}<br>
                Kunyomi: ${kanjiData.kunyomi}<br>
                Meaning: ${kanjiData.meaning}
            `;
            infoDiv.appendChild(newInfo);
        }

        // Initial load
        loadSet();
    </script>
</body>
</html>
